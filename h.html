<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æœ­ç²¾é¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #007aff; /* iOS Blue */
      --bg-color: #f2f2f7; /* iOS System Gray */
      --card-bg: #ffffff;
      --text-main: #1c1c1e;
      --text-sub: #8e8e93;
      --divider: #e5e5ea;
      --highlight: #ff3b30;
    }

    body {
      background-color: var(--bg-color);
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Noto Sans TC", sans-serif;
      margin: 0;
      padding: 20px 16px;
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
    }

    /* å¡ç‰‡è¨­è¨ˆ - æ¥µç°¡ä¹¾æ·¨ */
    .shop-card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 18px 20px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    /* æ¨™é¡Œå€ */
    .shop-header {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--divider);
    }

    .shop-icon {
      font-size: 30px;
      margin-right: 12px;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f2f2f7;
      border-radius: 10px;
    }

    .shop-name {
      font-size: 19px;
      font-weight: 700;
      color: var(--text-main);
      text-decoration: none;
      line-height: 1.3;
      flex: 1;
    }

    .shop-sub-name {
      display: block;
      font-size: 13px; 
      font-weight: 400; 
      color: var(--text-sub);
      margin-top: 3px;
    }

    /* æ§åˆ¶å€ */
    .control-bar {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 14px;
    }

    .fee-badge {
      font-size: 13px; 
      color: #636366; 
      background: #e5e5ea; 
      padding: 5px 12px; 
      border-radius: 6px; 
      font-weight: 500;
    }

    .salon-select {
      font-size: 14px;
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid #c7c7cc;
      background: #fff;
      color: var(--text-main);
      outline: none;
      font-weight: 500;
    }

    /* åƒ¹æ ¼åˆ—è¡¨ */
    .price-list {
      list-style: none;
      padding: 0;
      margin: 0 0 20px 0;
    }

    .price-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 11px 0;
      border-bottom: 1px solid var(--divider);
    }

    .price-item:last-child {
      border-bottom: none;
    }

    .time-badge {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      background: #f2f2f7;
      padding: 5px 10px;
      border-radius: 6px;
      min-width: 50px;
      text-align: center;
    }

    .price-info {
      text-align: right;
    }

    .main-price {
      display: block;
      font-size: 17px;
      font-weight: 600;
      color: var(--text-main);
      letter-spacing: 0.3px;
    }

    .sub-cp {
      display: block;
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 3px;
    }
    
    .sub-cp span {
      color: #ff9500; 
      font-weight: 500;
    }

    /* æ¨è–¦å€å¡Š */
    .recommend-box {
      background: #f9f9f9;
      border-radius: 10px;
      padding: 14px;
      margin-top: 10px;
      border: 1px solid #ebebeb;
    }

    .rec-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .combo-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 14px;
      color: var(--text-main);
    }
    
    .combo-row:last-child { margin-bottom: 0; }

    .combo-name {
      font-weight: 500;
    }

    .rank-badge {
      display: inline-block;
      width: 20px;
      color: #ff9500;
      font-weight: bold;
    }

    .combo-val {
      font-weight: 600;
      color: var(--highlight);
    }

    /* æŒ‰éˆ•ç¾¤çµ„ */
    .action-buttons {
      display: flex;
      gap: 12px;
      margin-top: 18px;
    }

    .btn {
      flex: 1;
      text-align: center;
      padding: 12px 0;
      border-radius: 10px;
      text-decoration: none;
      font-size: 15px;
      font-weight: 600;
      transition: opacity 0.2s;
    }
    
    .btn:active { opacity: 0.6; }

    .btn-attend {
      background: #f2f2f7;
      color: var(--primary);
    }
    
    .btn-line {
      background: #06c755;
      color: white;
    }

    /* åº•éƒ¨ç¿»è­¯æŒ‰éˆ• */
    .translate-fab {
      text-align: center;
      margin-top: 30px;
      margin-bottom: 20px;
    }

    .translate-link {
      display: inline-block;
      background: #fff;
      padding: 12px 30px;
      border-radius: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      color: var(--primary);
      font-weight: 600;
      text-decoration: none;
      font-size: 15px;
    }
  </style>
</head>
<body>

<div class="container">

  <!-- FANTASY Spa -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ°</div>
      <!-- ä¿®æ­£é€£çµï¼šä½¿ç”¨ Google Maps Web API ä¸¦åŠ å…¥æ—¥æ–‡æœå°‹å­—ä¸²ï¼Œé¿å… Apple Maps æ‰¾ä¸åˆ° -->
      <a href="https://www.google.com/maps/search/?api=1&query=FANTASY+Spa+æœ­å¹Œ+ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¹ãƒ‘" target="_blank" class="shop-name">
        FANTASY Spa<span class="shop-sub-name">ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¹ãƒ‘</span>
      </a>
    </div>

    <div class="control-bar">
      <span class="fee-badge">æŒ‡åè²» 2,000æ—¥åœ“ (å·²å›ºå®š)</span>
    </div>

    <ul class="price-list" id="fantasyFeesList">
      <li class="price-item">
        <span class="time-badge">70åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_70">--</span>
          <span class="sub-cp"><span id="cp_fan_70">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_90">--</span>
          <span class="sub-cp"><span id="cp_fan_90">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">110åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_110">--</span>
          <span class="sub-cp"><span id="cp_fan_110">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ</div>
      <div id="fantasyRecommendText">è¨ˆç®—ä¸­...</div>
    </div>

    <div class="action-buttons">
      <a href="https://www.cityheaven.net/hokkaido/A0101/A010103/fantasispa/attend/" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://line.me/ti/p/GpYCQJr92B" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <!-- Happiness Sapporo -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ€</div>
      <!-- ä¿®æ­£é€£çµï¼šåŠ å…¥æ—¥æ–‡ ãƒãƒ”ãƒã‚¹æœ­å¹Œ ç¢ºä¿ Apple Maps ä¹Ÿèƒ½æ‰¾åˆ° -->
      <a href="https://www.google.com/maps/search/?api=1&query=ãƒãƒ”ãƒã‚¹æœ­å¹Œ+Happiness+Sapporo" target="_blank" class="shop-name">
        Happiness Sapporo<span class="shop-sub-name">ãƒãƒ”ãƒã‚¹æœ­å¹Œ</span>
      </a>
    </div>
    
    <div class="control-bar">
      <span class="fee-badge">æŒ‡åè²» 2,000æ—¥åœ“ (å·²å›ºå®š)</span>
    </div>

    <ul class="price-list" id="happinessFeesList">
      <li class="price-item">
        <span class="time-badge">60åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_60">--</span>
          <span class="sub-cp"><span id="cp_hap_60">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">75åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_75">--</span>
          <span class="sub-cp"><span id="cp_hap_75">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_90">--</span>
          <span class="sub-cp"><span id="cp_hap_90">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ</div>
      <div id="happinessRecommendText">è¨ˆç®—ä¸­...</div>
    </div>

    <div class="action-buttons">
      <a href="https://fujoho.jp/index.php?p=shop_info&id=59887" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://lin.ee/qMmPn8x" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <!-- Salon de M -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ©</div>
      <!-- ä¿®æ­£é€£çµï¼šåŠ å…¥æ—¥æ–‡ ã‚µãƒ­ãƒ³ãƒ‰ã‚¨ãƒ  ç¢ºä¿æº–ç¢ºåº¦ -->
      <a href="https://www.google.com/maps/search/?api=1&query=ã‚µãƒ­ãƒ³ãƒ‰ã‚¨ãƒ +æœ­å¹Œ+Salon+de+M" target="_blank" class="shop-name">
        Salon de M<span class="shop-sub-name">ã‚µãƒ­ãƒ³ãƒ‰ã‚¨ãƒ </span>
      </a>
    </div>

    <div class="control-bar">
      <select class="salon-select" id="salonSelect" onchange="updateSalonCP()">
        <option value="0">æŒ‡åè²»: Â¥0</option>
        <option value="1000">æŒ‡åè²»: Â¥1,000</option>
        <option value="2000">æŒ‡åè²»: Â¥2,000</option>
        <option value="3000">æŒ‡åè²»: Â¥3,000</option>
        <option value="4000">æŒ‡åè²»: Â¥4,000</option>
        <option value="5000">æŒ‡åè²»: Â¥5,000</option>
      </select>
    </div>

    <ul class="price-list" id="salonFeesList">
      <li class="price-item">
        <span class="time-badge">70åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_70">--</span>
          <span class="sub-cp"><span id="cp_70">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_90">--</span>
          <span class="sub-cp"><span id="cp_90">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">110åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_110">--</span>
          <span class="sub-cp"><span id="cp_110">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ</div>
      <div id="salonRecommendText">è¨ˆç®—ä¸­...</div>
    </div>
    
    <div class="action-buttons">
      <a href="https://www.cityheaven.net/hokkaido/A0101/A010103/soap_q/attend/" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://line.me/ti/p/iSXPYiUL5j" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <div class="translate-fab">
    <a href="https://yoasobi-heaven.com/heaven-chat/home" target="_blank" class="translate-link">
      ğŸŒ é–‹å•Ÿæ—¥æ–‡ç¿»è­¯èŠå¤©å®¤
    </a>
  </div>

</div>

<script>
  const fmt = (num) => num.toLocaleString();

  function calculateCombinations(courses, fee) {
    let combos = [];
    for(let i=0; i<courses.length; i++) {
      for(let j=i; j<courses.length; j++) {
        const c1 = courses[i];
        const c2 = courses[j];
        const totalMin = c1.min + c2.min;
        const totalPrice = c1.price + c2.price + fee;
        const cp = totalPrice / totalMin;
        combos.push({
          name: `${c1.min}+${c2.min}`,
          totalMin: totalMin,
          cp: cp
        });
      }
    }
    combos.sort((a, b) => a.cp - b.cp);
    return combos.slice(0, 3);
  }

  function renderRecommend(elementId, topCombos) {
    const el = document.getElementById(elementId);
    const medals = ['1', '2', '3'];
    let html = '';
    topCombos.forEach((item, idx) => {
      html += `
        <div class="combo-row">
          <span class="combo-name"><span class="rank-badge">${medals[idx]}</span>${item.name}åˆ†</span>
          <span class="combo-val">${item.cp.toFixed(1)} /åˆ†</span>
        </div>
      `;
    });
    el.innerHTML = html;
  }

  // --- FANTASY Spa ---
  const fantasyBasePrices = [
    { min: 70, price: 44000 },
    { min: 90, price: 55000 },
    { min: 110, price: 68000 }
  ];

  function updateFantasyCP() {
    const fee = 2000;
    fantasyBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_fan_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_fan_${item.min}`).textContent = cp.toFixed(1) + " /åˆ†";
    });
    const topCombos = calculateCombinations(fantasyBasePrices, fee);
    renderRecommend('fantasyRecommendText', topCombos);
  }

  // --- Happiness Sapporo ---
  const happinessBasePrices = [
    { min: 60, price: 30000 },
    { min: 75, price: 38000 },
    { min: 90, price: 46000 }
  ];

  function updateHappinessCP() {
    const fee = 2000;
    happinessBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_hap_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_hap_${item.min}`).textContent = cp.toFixed(1) + " /åˆ†";
    });
    const topCombos = calculateCombinations(happinessBasePrices, fee);
    renderRecommend('happinessRecommendText', topCombos);
  }

  // --- Salon de M ---
  const salonBasePrices = [
    { min: 70, price: 43000 },
    { min: 90, price: 55000 },
    { min: 110, price: 68000 }
  ];

  function updateSalonCP() {
    const feeSelect = document.getElementById('salonSelect');
    const fee = parseInt(feeSelect.value) || 0;

    salonBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_${item.min}`).textContent = cp.toFixed(1) + " /åˆ†";
    });

    const topCombos = calculateCombinations(salonBasePrices, fee);
    renderRecommend('salonRecommendText', topCombos);
  }

  window.onload = function() {
    updateFantasyCP();
    updateHappinessCP();
    updateSalonCP();
  }
</script>
</body>
</html>
