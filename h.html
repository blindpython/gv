<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æœ­å¹Œæ³¡æ³¡æµ´ç²¾é¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --accent: #ef4444;
      --bg-color: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #1f2937;
      --text-sub: #6b7280;
    }

    body {
      background-color: var(--bg-color);
      font-family: 'Noto Sans TC', sans-serif;
      margin: 0;
      padding: 20px 16px;
      color: var(--text-main);
    }

    .container {
      max-width: 500px;
      margin: 0 auto;
    }

    /* å¡ç‰‡é€šç”¨æ¨£å¼ */
    .shop-card {
      background: var(--card-bg);
      border-radius: 24px;
      padding: 24px 20px;
      margin-bottom: 24px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.01);
      position: relative;
      overflow: hidden;
      transition: transform 0.2s;
    }

    .shop-card:active {
      transform: scale(0.99);
    }

    /* æ¨™é¡Œå€ */
    .shop-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #f0f0f0;
    }

    .shop-icon {
      font-size: 28px;
      margin-right: 12px;
      background: #eff6ff;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
    }

    .shop-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
      text-decoration: none;
      line-height: 1.4;
      flex: 1;
    }

    .shop-name:hover {
      color: var(--primary);
    }

    /* åƒ¹æ ¼åˆ—è¡¨ */
    .price-list {
      list-style: none;
      padding: 0;
      margin: 0 0 20px 0;
    }

    .price-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px dashed #e5e7eb;
    }

    .price-item:last-child {
      border-bottom: none;
    }

    .time-badge {
      background: #f3f4f6;
      color: var(--text-main);
      padding: 4px 10px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
    }

    .price-info {
      text-align: right;
    }

    .main-price {
      display: block;
      font-size: 17px;
      font-weight: 700;
      color: var(--text-main);
    }

    .sub-cp {
      display: block;
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 2px;
      font-weight: 500;
    }
    
    .sub-cp span {
      color: #f59e0b; /* Orange for CP value */
    }

    /* æ¨è–¦å€å¡Š */
    .recommend-box {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border-radius: 16px;
      padding: 16px;
      margin-top: 10px;
      border: 1px solid #bfdbfe;
    }

    .rec-title {
      font-size: 13px;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .rec-content {
      font-size: 14px;
    }

    .combo-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      align-items: center;
    }
    
    .combo-row:last-child { margin-bottom: 0; }

    .combo-name {
      font-weight: 500;
      color: #374151;
    }

    .rank-badge {
      display: inline-block;
      width: 20px;
      text-align: center;
      margin-right: 4px;
    }

    .combo-val {
      font-weight: 700;
      color: var(--accent);
      font-size: 13px;
    }

    /* é€£çµæŒ‰éˆ•å€ */
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .btn {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 12px;
      text-decoration: none;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s;
    }

    .btn-attend {
      background: #f3f4f6;
      color: var(--text-sub);
    }
    
    .btn-attend:hover { background: #e5e7eb; color: #333; }

    .btn-line {
      background: #06c755;
      color: white;
    }
    
    .btn-line:hover { background: #05b34c; }

    /* Salon ä¸‹æ‹‰é¸å–®ç¾åŒ– */
    .salon-control {
      margin-bottom: 15px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }

    .salon-select {
      border: 1px solid #d1d5db;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      background: white;
      color: #4b5563;
      outline: none;
      cursor: pointer;
    }
    
    /* å›ºå®šæŒ‡åè²»æ¨™ç±¤ */
    .fee-badge {
      font-size: 13px; 
      color: #666; 
      background: #f0f0f0; 
      padding: 6px 12px; 
      border-radius: 20px; 
      font-weight: 500;
    }

    /* åº•éƒ¨ç¿»è­¯å€ */
    .translate-fab {
      background: white;
      border-radius: 20px;
      padding: 15px;
      text-align: center;
      margin-top: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }

    .translate-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--primary);
      font-weight: 700;
      text-decoration: none;
    }
  </style>
</head>
<body>

<div class="container">

  <!-- FANTASY Spa -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ°</div>
      <a href="https://www.google.com/maps/search/?api=1&query=FANTASY+Spa+Sapporo+Susukino" target="_blank" class="shop-name">
        FANTASY Spa<br><span style="font-size:13px; font-weight:400; color:#888;">ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¹ãƒ‘</span>
      </a>
    </div>

    <div class="salon-control">
      <span class="fee-badge">æŒ‡åè²» 2,000æ—¥åœ“ (å·²å›ºå®š)</span>
    </div>

    <ul class="price-list" id="fantasyFeesList">
      <li class="price-item">
        <span class="time-badge">70åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_70">--</span>
          <span class="sub-cp">CP <span id="cp_fan_70">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_90">--</span>
          <span class="sub-cp">CP <span id="cp_fan_90">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">110åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_fan_110">--</span>
          <span class="sub-cp">CP <span id="cp_fan_110">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ (å«ä¸€æ¬¡æŒ‡å)</div>
      <div class="rec-content" id="fantasyRecommendText">è¨ˆç®—ä¸­...</div>
    </div>

    <div class="action-buttons">
      <a href="https://www.cityheaven.net/hokkaido/A0101/A010103/fantasispa/attend/" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://line.me/ti/p/GpYCQJr92B" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <!-- Happiness Sapporo -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ€</div>
      <a href="https://www.google.com/maps/search/?api=1&query=Happiness+Sapporo+Soapland" target="_blank" class="shop-name">
        Happiness Sapporo<br><span style="font-size:13px; font-weight:400; color:#888;">ãƒãƒ”ãƒã‚¹æœ­å¹Œ</span>
      </a>
    </div>
    
    <div class="salon-control">
      <span class="fee-badge">æŒ‡åè²» 2,000æ—¥åœ“ (å·²å›ºå®š)</span>
    </div>

    <ul class="price-list" id="happinessFeesList">
      <li class="price-item">
        <span class="time-badge">60åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_60">--</span>
          <span class="sub-cp">CP <span id="cp_hap_60">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">75åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_75">--</span>
          <span class="sub-cp">CP <span id="cp_hap_75">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_hap_90">--</span>
          <span class="sub-cp">CP <span id="cp_hap_90">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ (å«ä¸€æ¬¡æŒ‡å)</div>
      <div class="rec-content" id="happinessRecommendText">è¨ˆç®—ä¸­...</div>
    </div>

    <div class="action-buttons">
      <a href="https://fujoho.jp/index.php?p=shop_info&id=59887" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://lin.ee/qMmPn8x" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <!-- Salon de M -->
  <div class="shop-card">
    <div class="shop-header">
      <div class="shop-icon">ğŸ©</div>
      <a href="https://www.google.com/maps/search/?api=1&query=Salon+de+M+Sapporo+Susukino" target="_blank" class="shop-name">
        Salon de M<br><span style="font-size:13px; font-weight:400; color:#888;">ã‚µãƒ­ãƒ³ãƒ‰ã‚¨ãƒ </span>
      </a>
    </div>

    <div class="salon-control">
      <select class="salon-select" id="salonSelect" onchange="updateSalonCP()">
        <option value="0">æŒ‡åè²»: Â¥0</option>
        <option value="1000">æŒ‡åè²»: Â¥1,000</option>
        <option value="2000">æŒ‡åè²»: Â¥2,000</option>
        <option value="3000">æŒ‡åè²»: Â¥3,000</option>
        <option value="4000">æŒ‡åè²»: Â¥4,000</option>
        <option value="5000">æŒ‡åè²»: Â¥5,000</option>
      </select>
    </div>

    <ul class="price-list" id="salonFeesList">
      <li class="price-item">
        <span class="time-badge">70åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_70">--</span>
          <span class="sub-cp">CP <span id="cp_70">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">90åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_90">--</span>
          <span class="sub-cp">CP <span id="cp_90">--</span></span>
        </div>
      </li>
      <li class="price-item">
        <span class="time-badge">110åˆ†</span>
        <div class="price-info">
          <span class="main-price" id="p_110">--</span>
          <span class="sub-cp">CP <span id="cp_110">--</span></span>
        </div>
      </li>
    </ul>

    <div class="recommend-box">
      <div class="rec-title">ğŸ’¡ æœ€ä½³å»¶é•·çµ„åˆ (å«ä¸€æ¬¡æŒ‡å)</div>
      <div class="rec-content" id="salonRecommendText">è¨ˆç®—ä¸­...</div>
    </div>
    
    <div class="action-buttons">
      <a href="https://www.cityheaven.net/hokkaido/A0101/A010103/soap_q/attend/" target="_blank" class="btn btn-attend">å‡ºå‹¤è¡¨</a>
      <a href="https://line.me/ti/p/iSXPYiUL5j" target="_blank" class="btn btn-line">LINE é ç´„</a>
    </div>
  </div>

  <div class="translate-fab">
    <a href="https://yoasobi-heaven.com/heaven-chat/home" target="_blank" class="translate-link">
      ğŸŒ é–‹å•Ÿæ—¥æ–‡ç¿»è­¯èŠå¤©å®¤
    </a>
  </div>

</div>

<script>
  const fmt = (num) => num.toLocaleString();

  // æ ¸å¿ƒç®—æ³•ï¼šè¨ˆç®—çµ„åˆ (C1 + C2 + Fee) / (M1 + M2)
  function calculateCombinations(courses, fee) {
    let combos = [];
    for(let i=0; i<courses.length; i++) {
      for(let j=i; j<courses.length; j++) {
        const c1 = courses[i];
        const c2 = courses[j];
        const totalMin = c1.min + c2.min;
        const totalPrice = c1.price + c2.price + fee;
        const cp = totalPrice / totalMin;
        combos.push({
          name: `${c1.min}+${c2.min}`,
          totalMin: totalMin,
          cp: cp
        });
      }
    }
    combos.sort((a, b) => a.cp - b.cp);
    return combos.slice(0, 3);
  }

  // æ¸²æŸ“æ¨è–¦å€å¡Š
  function renderRecommend(elementId, topCombos) {
    const el = document.getElementById(elementId);
    const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
    let html = '';
    topCombos.forEach((item, idx) => {
      html += `
        <div class="combo-row">
          <span class="combo-name"><span class="rank-badge">${medals[idx]}</span>${item.name}åˆ†</span>
          <span class="combo-val">${item.cp.toFixed(1)} /åˆ†</span>
        </div>
      `;
    });
    el.innerHTML = html;
  }

  // --- FANTASY Spa ---
  const fantasyBasePrices = [
    { min: 70, price: 44000 },
    { min: 90, price: 55000 },
    { min: 110, price: 68000 }
  ];

  function updateFantasyCP() {
    const fee = 2000;
    // æ›´æ–°åˆ—è¡¨åƒ¹æ ¼ (å«æŒ‡åè²»)
    fantasyBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_fan_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_fan_${item.min}`).textContent = cp.toFixed(1);
    });
    // è¨ˆç®—ä¸¦é¡¯ç¤ºæ¨è–¦çµ„åˆ
    const topCombos = calculateCombinations(fantasyBasePrices, fee);
    renderRecommend('fantasyRecommendText', topCombos);
  }

  // --- Happiness Sapporo ---
  const happinessBasePrices = [
    { min: 60, price: 30000 },
    { min: 75, price: 38000 },
    { min: 90, price: 46000 }
  ];

  function updateHappinessCP() {
    const fee = 2000;
    happinessBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_hap_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_hap_${item.min}`).textContent = cp.toFixed(1);
    });
    const topCombos = calculateCombinations(happinessBasePrices, fee);
    renderRecommend('happinessRecommendText', topCombos);
  }

  // --- Salon de M ---
  const salonBasePrices = [
    { min: 70, price: 43000 },
    { min: 90, price: 55000 },
    { min: 110, price: 68000 }
  ];

  function updateSalonCP() {
    const feeSelect = document.getElementById('salonSelect');
    const fee = parseInt(feeSelect.value) || 0;

    salonBasePrices.forEach(item => {
      let finalPrice = item.price + fee;
      let cp = finalPrice / item.min;
      document.getElementById(`p_${item.min}`).textContent = `Â¥${fmt(finalPrice)}`;
      document.getElementById(`cp_${item.min}`).textContent = cp.toFixed(1);
    });

    const topCombos = calculateCombinations(salonBasePrices, fee);
    renderRecommend('salonRecommendText', topCombos);
  }

  // åˆå§‹åŒ–
  window.onload = function() {
    updateFantasyCP();
    updateHappinessCP();
    updateSalonCP();
  }
</script>
</body>
</html>
